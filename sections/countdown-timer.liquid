<div class="countdown-timer bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-100 py-2 px-4 rounded">
  <h2 class="text-lg font-semibold">Limited Time Offer!</h2>
  <p>Ends in: <span id="countdown"></span></p>
</div>

<script defer>
  document.addEventListener('DOMContentLoaded', function() {
    // Cache DOM element
    const countdownElement = document.getElementById("countdown");
    
    // Set the date we're counting down to
    const countDownDate = new Date("Dec 31, 2024 23:59:59").getTime();
    
    /**
     * Format the countdown time
     * @param {number} days - Number of days
     * @param {number} hours - Number of hours
     * @param {number} minutes - Number of minutes
     * @param {number} seconds - Number of seconds
     * @return {string} Formatted time string
     */
    function formatCountdown(days, hours, minutes, seconds) {
      return `${days}d ${hours}h ${minutes}m ${seconds}s`;
    }
    
    /**
     * Update the countdown display
     */
    function updateCountdown() {
      // Get today's date and time
      const now = new Date().getTime();
      
      // Find the distance between now and the count down date
      const distance = countDownDate - now;
      
      if (distance < 0) {
        // If the countdown is finished
        if (countdownElement) {
          countdownElement.textContent = "EXPIRED";
        }
        // Clear the interval to stop unnecessary updates
        clearInterval(countdownInterval);
        return;
      }
      
      // Time calculations
      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);
      
      // Update the countdown display if element exists
      if (countdownElement) {
        countdownElement.textContent = formatCountdown(days, hours, minutes, seconds);
      }
    }
    
    // Run once immediately to avoid delay
    updateCountdown();
    
    // Update the countdown every 1 second
    const countdownInterval = setInterval(updateCountdown, 1000);
  });
</script>

{% schema %}
{
  "name": "Countdown Timer",
  "settings": []
}
{% endschema %}
